<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marian-Gabriel Hâncean, Prof.Habil.Ph.D.">
<meta name="dcterms.date" content="2024-09-30">

<title>Network analysis: lab meeting 01</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="neta_01_files/libs/clipboard/clipboard.min.js"></script>
<script src="neta_01_files/libs/quarto-html/quarto.js"></script>
<script src="neta_01_files/libs/quarto-html/popper.min.js"></script>
<script src="neta_01_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="neta_01_files/libs/quarto-html/anchor.min.js"></script>
<link href="neta_01_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="neta_01_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="neta_01_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="neta_01_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="neta_01_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#lab-overview" id="toc-lab-overview" class="nav-link active" data-scroll-target="#lab-overview">1 Lab overview</a>
  <ul class="collapse">
  <li><a href="#administrative-aspects" id="toc-administrative-aspects" class="nav-link" data-scroll-target="#administrative-aspects">1.1 Administrative aspects</a></li>
  <li><a href="#evaluation" id="toc-evaluation" class="nav-link" data-scroll-target="#evaluation">1.2 Evaluation</a></li>
  </ul></li>
  <li><a href="#lab-organization" id="toc-lab-organization" class="nav-link" data-scroll-target="#lab-organization">2 Lab organization</a>
  <ul class="collapse">
  <li><a href="#tentative-schedule" id="toc-tentative-schedule" class="nav-link" data-scroll-target="#tentative-schedule">2.1 Tentative schedule</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">2.2 References</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Network analysis: lab meeting 01</h1>
<p class="subtitle lead">Introduction lab meeting</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Marian-Gabriel Hâncean, Prof.Habil.Ph.D. <a href="mailto:gabriel.hancean@sas.unibuc.ro" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Bucharest, Dep. Sociology
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 30, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center" style="float: left; margin-right: 10px;">
<figure class="figure">
<p><img src="_foto_mgh.jpeg" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>MG Hâncean, computational sociologist &amp; network scientist</figcaption>
</figure>
</div>
<p><strong>Short bio</strong> Marian-Gabriel Hâncean (he/him) is a computational sociologist (practitioner) and a network scientist. His research integrates methodologies from sociology, data science, and computer science to analyze human behavior through the detection and analysis of complex network patterns. He employs network science and computational sociology to explore the interplay between network structures, social selection, and social influence. Recently, his work has focused on applying advanced computational models, such as <em>Relational Hyperevent Models</em> (<code>RHEM</code>), to study phenomena like virus spreading in socio-centric networks, patterns of scientific collaboration, and the science of team science. His research combines theoretical and computational approaches to examine the mutual dynamics between relational event data (social interactions) and relational states (social structures), providing insights into areas such as epidemiology and public health. His current projects involve computational analyses of cancer and cardiovascular risk factors within panel personal network data observed in different living labs. His work underlines a multidisciplinary approach, bridging the gap between computational methods in social sciences and traditional network analysis techniques, and contributes to the broader field of computer science by developing models applicable in areas like public health, organizational studies, and collaborative networks.</p>
<section id="lab-overview" class="level1">
<h1>1 Lab overview</h1>
<section id="administrative-aspects" class="level2">
<h2 class="anchored" data-anchor-id="administrative-aspects">1.1 Administrative aspects</h2>
<p><em>The Network analysis: pattern detection</em>, briefly hereafter <code>netA</code>, is an introductory interdisciplinary lab that gives the basic concepts and analysis techniques in social network analysis (<code>sna</code>).</p>
<p>The participants to this lab will learn how to identify key actors and groups in social networks, to detect and measure fundamental network structures, and to fit statistical models to network data.</p>
<p><code>netA</code> is a hands-on lab seeking to teach students how to perform network analysis using <code>R</code>.</p>
<p>At the end of the lab, students will be able to design and implement a <em>small</em> social network analysis research project.</p>
<p>Various examples of published network research are available <a href="https://sites.google.com/view/hancean">on my webpage; click here</a></p>
<p>Lab meetings are scheduled each <span style="color:red"><strong>Monday</strong></span>, in 90 Panduri Blv. building (Faculty of Sociology and Social Work), <span style="color:red"><strong>room 207</strong></span>, between <span style="color:red"><strong>18:00 - 20:00</strong></span>.</p>
<p>For participation, students are recommended to bring their own laptop PC. Yet, if that is not possible, they can use the computers from the room.</p>
<p><code>netA</code> participants can make appoints and discuss the problems they encounter with the lab exercises using this email address <a href="mailto:gabriel.hancean@sas.unibuc.ro" class="email">gabriel.hancean@sas.unibuc.ro</a>. I will respond <strong>only</strong> to emails sent to this email address.</p>
</section>
<section id="evaluation" class="level2">
<h2 class="anchored" data-anchor-id="evaluation">1.2 Evaluation</h2>
<p>There are two components in the evaluation:</p>
<ul>
<li><p>a written test (at the end of the semester): <strong>5 points</strong></p></li>
<li><p>a network project (students will present their projects in the last two meetings of the semester; students can work alone or in groups of maximum 3 students per project): <strong>5 points</strong></p></li>
<li><p>NB: Students can improve their grade by actively participating during the semester at the lab meetings (e.g., present lab exercises, participate to special events organized in relation to the <code>netA</code> lab etc.). They can collect <strong>2.5 points</strong></p></li>
</ul>
</section>
</section>
<section id="lab-organization" class="level1">
<h1>2 Lab organization</h1>
<section id="tentative-schedule" class="level2">
<h2 class="anchored" data-anchor-id="tentative-schedule">2.1 Tentative schedule</h2>
<p><strong>Week 1, September 30, 2024</strong></p>
<ul>
<li><p>Administrative meeting: course presentation, student evaluation, mandatory &amp; recommended readings, course design</p></li>
<li><p>Introduction to software tools that may be useful for performing network research (e.g., <a href="https://www.r-project.org/"><code>R</code></a>, <a href="https://posit.co/download/rstudio-desktop/"><code>RStudio</code></a>, <a href="https://sites.google.com/site/ucinetsoftware/home?pli=1"><code>UCINET</code></a>, <a href="https://visone.ethz.ch"><code>visone</code></a>, <a href="https://networkcanvas.com"><code>Network Canvas</code></a>)</p></li>
<li><p>Providing the social context in which network research is being practiced</p></li>
<li><p>After this meeting, you will find out: the course requirements and design, how to access course resources, which are some of the most frequently used software tools for performing network research</p></li>
</ul>
<p><strong>Week 2, October 7, 2024</strong></p>
<ul>
<li><p>Introduction to network analysis</p></li>
<li><p>Why and what are social networks?</p></li>
<li><p>Types of relations and goals of the network analysis</p></li>
<li><p>Network variables as predictors and dependent variables</p></li>
<li><p>Installing <code>R</code> and <code>RStudio</code>, and providing an overall presentation of <code>RStudio</code></p></li>
</ul>
<div class="quarto-figure quarto-figure-center" style="float: left; margin-right: 10px;">
<figure class="figure">
<p><img src="_foto_04.jpeg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption><strong>Image 1</strong>: directed <code>hyper graphs</code></figcaption>
</figure>
</div>
<p>The source of the <em>Image 1</em> is <span style="color:gray">Hâncean, MG., Lerner, J., Perc, M. et al.&nbsp;Occupations and their impact on the spreading of COVID-19 in urban communities. Sci Rep 12, 14115 (2022)</span> <a href="https://doi.org/10.1038/s41598-022-18392-5">Click here</a></p>
<p><strong>Week 3, October 14, 2024</strong></p>
<ul>
<li><p>Network analysis vocabulary</p></li>
<li><p>Graphs, adjacency matrices, paths and network components etc.</p></li>
<li><p>Running simple codes in <code>RStudio</code></p></li>
</ul>
<div class="quarto-figure quarto-figure-center" style="float: left; margin-right: 10px;">
<figure class="figure">
<p><img src="_foto_05.jpeg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption><strong>Image 2</strong>: an <code>observed</code> network</figcaption>
</figure>
</div>
<p>The source of the <em>Image 2</em> is <span style="color:gray">Hâncean MG, Lerner J, Perc M, et al.&nbsp;The role of age in the spreading of COVID-19 across a social network in Bucharest. J Complex Netw. 9,4, cnab026 (2021)</span> <a href="https://doi.org/10.1093/comnet/cnab026">Click here</a></p>
<p><strong>Week 4, October 21, 2024</strong></p>
<ul>
<li><p>Network research designs</p></li>
<li><p>Experiments and field studies; sociocentric, egocentric and personal network designs; types of nodes and ties; actor attributes</p></li>
<li><p><code>R</code> exercises: creating data files (network data management)</p></li>
</ul>
<div class="quarto-figure quarto-figure-center" style="float: left; margin-right: 10px;">
<figure class="figure">
<p><img src="_foto_06.jpeg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption><strong>Image 3</strong>: <code>link tracing</code> sampling</figcaption>
</figure>
</div>
<p>The source of the <em>Image 3</em> is <span style="color:gray">Hâncean MG, Lubbers MJ, Molina JL (2021) Measuring transnational social fields through binational link-tracing sampling. PLOS ONE 16(6): e0253042)</span> <a href="https://doi.org/10.1371/journal.pone.0253042">Click here</a></p>
<p><strong>Week 5, October 28, 2024</strong></p>
<ul>
<li><p>Sampling and boundaries</p></li>
<li><p>Ethics in network studies</p></li>
<li><p><code>R</code> exercises: creating visualizations (network data visualizations)</p></li>
</ul>
<p><strong>Week 6, November 4, 2024</strong></p>
<ul>
<li><p>Network questions; Question format; Respondent burden;</p></li>
<li><p>Validity and reliability; Network visual scales; Data from electronic sources;</p></li>
<li><p><code>R</code> exercises: network correlations</p></li>
</ul>
<p><strong>Week 7, November 11, 2024</strong></p>
<ul>
<li><p>Data management</p></li>
<li><p>Importing and exporting network data into <code>R</code></p></li>
<li><p>Data transformations</p></li>
<li><p>Converting attributes to networks</p></li>
<li><p>Converting to one-mode data</p></li>
<li><p><code>R</code> exercises</p></li>
</ul>
<p><strong>Week 8, November 18, 2024</strong></p>
<ul>
<li><p>Network visualizations</p></li>
<li><p>Layouts</p></li>
<li><p>Embedding node and ties attributes</p></li>
<li><p>Visual variables</p></li>
<li><p>Biases in visualizations</p></li>
<li><p><code>R</code> exercises</p></li>
</ul>
<div class="quarto-figure quarto-figure-center" style="float: left; margin-right: 10px;">
<figure class="figure">
<p><img src="_foto_08.jpeg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption><strong>Image 4</strong>: <code>centrality</code> layouts</figcaption>
</figure>
</div>
<p>The source of the <em>Image 4</em> is <span style="color:gray">Marian-Gabriel Hâncean, Mitja Slavinec, Matjaž Perc, The impact of human mobility networks on the global spread of COVID-19, Journal of Complex Networks, 8, 6, cnaa041 (2020)</span> <a href="https://doi.org/10.1093/comnet/cnaa041">Click here</a></p>
<p><strong>Week 9, November 25, 2024</strong></p>
<ul>
<li><p>Network measurements</p></li>
<li><p>The idea of centrality</p></li>
<li><p>(un)directed and valued(binary) networks</p></li>
<li><p>Negative and positive networks</p></li>
<li><p>Centrality measurements</p></li>
<li><p>Centrality layouts</p></li>
<li><p><code>R</code> exercises</p></li>
</ul>
<div class="quarto-figure quarto-figure-center" style="float: left; margin-right: 10px;">
<figure class="figure">
<p><img src="_foto_07.jpeg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption><strong>Image 5</strong>: <code>super-spreader</code></figcaption>
</figure>
</div>
<p>The source of the <em>Image 5</em> is <span style="color:gray">Hâncean Marian-Gabriel, Perc Matjaž and Lerner Jürgen. Early spread of COVID-19 in Romania: imported cases from Italy and human-to-human transmission networks. R. Soc. Open Sci. 7,200780 (2020)</span> <a href="https://doi.org/10.1098/rsos.200780">Click here</a></p>
<p><strong>Week 10, December 2, 2024</strong></p>
<ul>
<li><p>Network analysis</p></li>
<li><p>Level of analysis: node, dyad, network</p></li>
<li><p>Explaining the formation process of networks (antecedents)</p></li>
<li><p>Networks as predictors (contagion)</p></li>
<li><p><code>R</code> exercises</p></li>
</ul>
<div class="quarto-figure quarto-figure-center" style="float: left; margin-right: 10px;">
<figure class="figure">
<p><img src="_foto_03.jpeg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption><strong>Image 6</strong>: <code>co-affiliation</code> and <code>RHEMs</code></figcaption>
</figure>
</div>
<p>The source of the <em>Image 6</em> is <span style="color:gray">Lerner J, Hâncean M-G. Micro-level network dynamics of scientific collaboration and impact: Relational hyperevent models for the analysis of coauthor networks. Network Science, 11, 1:5–35 (2023)</span> <a href="https://www.cambridge.org/core/journals/network-science/article/microlevel-network-dynamics-of-scientific-collaboration-and-impact-relational-hyperevent-models-for-the-analysis-of-coauthor-networks/375932B5B86D2033A0A290DE8198BB32">Click here</a></p>
<p><strong>Week 11, December 9, 2024</strong></p>
<ul>
<li><p>Regression with networks</p></li>
<li><p><code>R</code> exercises</p></li>
</ul>
<div class="quarto-figure quarto-figure-center" style="float: left; margin-right: 10px;">
<figure class="figure">
<p><img src="_foto_01.jpeg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption><strong>Image 7</strong>: personal networks at multiple points in time</figcaption>
</figure>
</div>
<p>The source of the <em>Image 7</em> is <span style="color:gray">Hâncean, MG., Perc, M. &amp; Lerner, J. The coauthorship networks of the most productive European researchers. Scientometrics 126, 201–224 (2021)</span> <a href="https://doi.org/10.1007/s11192-020-03746-5">Click here</a></p>
<p><strong>Week 12, December 16, 2024</strong></p>
<ul>
<li><p>Regression with networks</p></li>
<li><p><code>R</code> exercises</p></li>
</ul>
<div class="quarto-figure quarto-figure-center" style="float: left; margin-right: 10px;">
<figure class="figure">
<p><img src="_foto_02.jpeg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption><strong>Image 8</strong>: multi-level networks</figcaption>
</figure>
</div>
<p>The source of the <em>Image 8</em> is <span style="color:gray">Hâncean, MG., Lerner, J., Perc, M. et al.&nbsp;Assortative mixing of opinions about COVID-19 vaccination in personal networks. Sci Rep 14, 3385 (2024)</span> <a href="https://doi.org/10.1038/s41598-024-53825-3">Click here</a></p>
<p><strong>Week 13, January 6, 2025</strong></p>
<ul>
<li><p>Students’ presentations: students will present their micro-research projects (maximum 3 students per project). The order of the presentations will be alphabetical.</p></li>
<li><p>Students are required to prepare presentations about their network analysis. Specifically, they are expected to collect, analyze, and visualize network data. Findings should be reported. Students will receive feedback after their presentation. Students may work independently or in groups (maximum 3 people).</p></li>
<li><p>Presentations should be delivered in the form of <code>R</code> files (students will run their codes and explain the results)</p></li>
</ul>
<p><strong>Week 14, January 13, 2025</strong></p>
<ul>
<li><p>Students’ presentations: students will present their micro-research projects (maximum 3 students per project). The order of the presentations will be alphabetical.</p></li>
<li><p>Students are required to prepare presentations about their network analysis. Specifically, they are expected to collect, analyze, and visualize network data. Findings should be reported. Students will receive feedback after their presentation. Students may work independently or in groups (maximum 3 people).</p></li>
<li><p>Presentations should be delivered in the form of <code>R</code> files (students will run their codes and explain the results)</p></li>
</ul>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">2.2 References</h2>
<p><strong>Mandatory readings</strong></p>
<ul>
<li><p>Hanneman, Robert A., and Mark Riddle. 2005. Introduction to Social Network Methods. University of California, Riverside. <a href="http://faculty.ucr.edu/~hanneman/">Click here</a></p></li>
<li><p>Rawlings, Craig M., Jeffrey A. Smith, James Moody, and Daniel A. McFarland. 2023. Network Analysis: Integrating Social Network Theory, Method, and Application with R. New York: Cambridge University Press. <a href="https://inarwhal.github.io/NetworkAnalysisR-book/">Click here</a></p></li>
<li><p>SP Borgatti, MG Everett, JC Johnson, F Agneessens, Analyzing social networks using R (Sage, 2022) <a href="https://www.amazon.de/-/en/Stephen-P-Borgatti/dp/1529722470">Click here</a></p></li>
</ul>
<p><strong>Recommended readings</strong></p>
<ul>
<li><p>SP Borgatti, A Mehra, DJ Brass, G Labianca, Network analysis in the social sciences, Science 323, 892 - 895, 2009. <a href="https://www.science.org/doi/10.1126/science.1165821">Click here</a></p></li>
<li><p>JL Molina, SP Borgatti, Moral bureaucracies and social network research, Social networks 67, 13-19, 2021 <a href="https://doi.org/10.1016/j.socnet.2019.11.001">Click here</a></p></li>
<li><p>D Lazer et al, Computational social science, Science 323, 721 - 723, 2009 <a href="https://www.science.org/doi/10.1126/science.1167742">Click here</a></p></li>
<li><p>R Tutorial on W3Schools <a href="https://www.w3schools.com/r/">Click here</a></p></li>
<li><p><code>swirl</code>,learn <code>R</code> in <code>R</code> <a href="https://swirlstats.com">Click here</a></p></li>
<li><p>SI O’Donoghue, BF Baldi, SJ Clark, AE Darling, JM Hogan, S Kaur et al.&nbsp;Visualization of biomedical data. Annual Review of Biomedical Data Science, 1, 275 - 304, 2018 <a href="https://doi.org/10.1146/annurev-biodatasci-080917-013424">Click here</a></p></li>
<li><p>Hâncean, MG., Lerner, J., Perc, M. et al.&nbsp;Occupations and their impact on the spreading of COVID-19 in urban communities. Sci Rep 12, 14115 (2022) <a href="https://doi.org/10.1038/s41598-022-18392-5">Click here</a></p></li>
<li><p>Hâncean MG, Lerner J, Perc M, et al.&nbsp;The role of age in the spreading of COVID-19 across a social network in Bucharest. J Complex Netw. 9,4, cnab026 (2021) <a href="https://doi.org/10.1093/comnet/cnab026">Click here</a></p></li>
<li><p>Hâncean, MG., Lerner, J., Perc, M. et al.&nbsp;Assortative mixing of opinions about COVID-19 vaccination in personal networks. Sci Rep 14, 3385 (2024) <a href="https://doi.org/10.1038/s41598-024-53825-3">Click here</a></p></li>
<li><p>Hâncean, MG., Perc, M. &amp; Lerner, J. The coauthorship networks of the most productive European researchers. Scientometrics 126, 201–224 (2021) <a href="https://doi.org/10.1007/s11192-020-03746-5">Click here</a></p></li>
<li><p>Lerner J, Hâncean M-G. Micro-level network dynamics of scientific collaboration and impact: Relational hyperevent models for the analysis of coauthor networks. Network Science, 11, 1:5–35 (2023) <a href="https://www.cambridge.org/core/journals/network-science/article/microlevel-network-dynamics-of-scientific-collaboration-and-impact-relational-hyperevent-models-for-the-analysis-of-coauthor-networks/375932B5B86D2033A0A290DE8198BB32">Click here</a></p></li>
<li><p>Marian-Gabriel Hâncean, Mitja Slavinec, Matjaž Perc, The impact of human mobility networks on the global spread of COVID-19, Journal of Complex Networks, 8, 6, cnaa041 (2020) <a href="https://doi.org/10.1093/comnet/cnaa041">Click here</a></p></li>
<li><p>Hâncean MG, Lubbers MJ, Molina JL (2021) Measuring transnational social fields through binational link-tracing sampling. PLOS ONE 16(6): e0253042) <a href="https://doi.org/10.1371/journal.pone.0253042">Click here</a></p></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>